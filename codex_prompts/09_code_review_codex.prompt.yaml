---
name: Code Review Assistant (OpenAI Codex)
description: Review a supplied diff and suggest improvements or potential issues
  before merge.
model: gpt-4
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |-
      - Caller provides a unified diff from git.
      - Repository context is available for reference.

      1. Parse {{diff}} and comment on style, correctness, and edge cases.
      2. Highlight missing tests or docs.
      3. Flag risky patterns or security concerns with file and line references.
      4. Recommend specific changes with sample code blocks.
      5. If the diff spans multiple areas, group feedback by file.

      Log any commands you would run if verifying locally (tests, linters).
  - role: user
    content: |-
      {{input}}
testData:
  - input: |-
      diff: |
        @@ line @@
    expected: Code Review -
evaluators:
  - name: Output starts with 'Code Review -'
    string:
      startsWith: 'Code Review -'
