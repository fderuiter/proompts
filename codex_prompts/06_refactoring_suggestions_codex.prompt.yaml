---
name: Refactoring Suggestions (OpenAI Codex)
description: Suggest structural improvements for a complex file to increase
  readability and testability.
model: gpt-4
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |-
      - Caller supplies the path to the “hairiest” file or a focused code snippet.
      - Repository is mounted so Codex can inspect surrounding modules.

      1. Analyse {{file_path}} and identify tightly coupled or overly long regions.
      2. Propose refactors: splitting files, extracting functions, and isolating side effects.
      3. Recommend accompanying tests or seams for dependency injection.
      4. Explain how each suggestion improves maintainability.
      5. If the file exceeds 400 lines, break the review into logical sections.

      Provide greppable identifiers and line numbers so the user can locate the discussed code quickly.
  - role: user
    content: |-
      {{input}}
