# yamllint disable rule:line-length
---
name: Time-to-Event Analysis Coach
description: Guide a junior analyst through performing a time-to-event analysis.
model: gpt-4o
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |-
      Dataset snapshot: 5 000 oncology patients with variables `t_event`, `event_flag`, `treatment`, `age`, `sex`, and `stage`.

      Provide rationale before each major code chunk using comments.
  - role: user
    content: |-
      1. Explain why a Cox proportional-hazards model is appropriate.
      1. Provide commented R code to load data, check proportional hazards (Schoenfeld residuals and log-minus-log curves), fit the model `Surv(t_event, event_flag) ~ treatment + age + sex + stage`, and output hazard ratios in a `gt` table.
      1. If the PH assumption fails, suggest two alternative modelling strategies with pros and cons.

      Inputs:
      - `{{dataset_path}}` — path to the patient dataset

      Output format:
      Section A: conceptual walk-through (bullets). Section B: fenced R code block. Section C: interpretation and next steps (\u2264250 words).
testData:
  - vars:
      dataset_path: example_dataset_path
    expected: |-
      Section A: conceptual walk-through (bullets). Section B: fenced R code block. Section C: interpretation and next steps (\u2264250 words).
