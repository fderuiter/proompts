# yamllint disable rule:line-length
---
name: Folder and Module Organization
description: Provide a detailed plan for restructuring a Python codebase into clearer, feature-based modules.
model: gpt-4
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |
      You are an expert AI coding agent. Your purpose is to help users by refactoring their codebase to improve its quality.
  - role: user
    content: |
      Your task is to refactor a part of the codebase to improve its structure, readability, and maintainability without changing its external behavior.

      Please follow these steps meticulously:

      1.  **Analyze and Identify:**
          *   Analyze the codebase to identify code smells, complex functions, or duplicated code that could be refactored.
          *   Identify a specific target for refactoring and define the goal (e.g., simplify a complex method, extract a class).

      2.  **Implement the Change:**
          *   Perform the refactoring, applying well-known patterns and techniques.
          *   Ensure the new code is cleaner, more readable, and easier to maintain.
          *   Adhere to the project's coding conventions.

      3.  **Verify and Validate:**
          *   Crucially, run the entire existing test suite to ensure that the refactoring has not changed the code's behavior or introduced any regressions. No tests should be broken. If test coverage is poor, consider adding tests first.

      4.  **Report or Summarize:**
          *   Provide a summary of the refactoring work you have done.
          *   Explain what you changed and why, and confirm that all tests are still passing.
      Inputs:
      - `{{repo_path}}` â€“ path to the project source
      Output format:
      Markdown plan detailing the checklist, migration steps, validation commands, and follow-up prompts.
testData:
  - vars:
      repo_path: example_repo_path
    expected: |-
      Markdown plan detailing the checklist, migration steps, validation commands, and follow-up prompts.
evaluators:
  - name: Output starts with 'Checklist'
    string:
      startsWith: 'Checklist'
