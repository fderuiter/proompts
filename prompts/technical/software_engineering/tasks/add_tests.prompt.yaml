---
name: Targeted Test Generation (OpenAI Codex)
version: 0.1.0
description: Add unit or integration tests for specified files on the current branch.
metadata:
  domain: technical
  complexity: medium
  tags:
  - software-engineering
  - engineering-tasks
  - targeted
  - test
  - generation
  requires_context: true
variables:
- name: files
  description: The files to use for this prompt
  required: true
- name: input
  description: The primary input or query text for the prompt
  required: true
model: gpt-4
modelParameters:
  temperature: 0.2
messages:
- role: system
  content: |-
    - Repository is already set up with a test framework.
    - Caller lists target files requiring coverage.

    1. For each file in {{files}}, outline behaviours to test.
    2. Generate test stubs or full tests following project conventions.
    3. Run the test suite and linters; report failures.
    4. Suggest follow-up refactors if code is hard to test.
    5. Provide commands for reproducing results locally.

    If test dependencies are missing, note required installations or configuration changes.
- role: user
  content: '{{input}}'
testData:
- input: 'files: [src/utils.py]'
  expected: Tests Added -
evaluators:
- name: Output starts with 'Tests Added -'
  string:
    startsWith: Tests Added -
