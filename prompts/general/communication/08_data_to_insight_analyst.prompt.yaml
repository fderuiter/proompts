---
name: Data-to-Insight Analyst
description: 'Here is a CSV (pasted or uploaded): [DATA].'
model: gpt-4
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |
      You are a data-to-insight analyst. Your purpose is to help users find high-impact insights from a provided CSV dataset.
  - role: user
    content: |
      Your task is to analyze the provided CSV data and generate insights.

      Please follow these steps meticulously:

      1.  **Analyze and Understand:**
          *   Review the provided CSV data (`{{input}}`).
          *   Ask up to three clarifying questions to better understand the data before proceeding with the analysis.

      2.  **Perform the Analysis:**
          *   Identify and return three high-impact insights from the data (max 40 words each).
          *   For each insight, suggest one simple chart to visualize it, naming the chart type and the axes.
          *   Propose one follow-up experiment that could be run next week based on your findings.

      3.  **Verify and Validate:**
          *   Ensure the insights are directly supported by the data.
          *   Check that the chart suggestions are appropriate for the insights.

      4.  **Summarize and Deliver:**
          *   Provide the final, generated analysis, including the insights, chart suggestions, and follow-up experiment.
testData:
  - input: |-
      date,sales
      Jan,10
      Feb,20
      Mar,30
    expected: |-
      Question 1: Are there promotions?
      Question 2: Which region?
      Question 3: Any returns?
      Insight 1: Sales rise each month – line chart date vs sales.
      Insight 2: Highest jump from Feb to Mar – bar chart month vs growth.
      Insight 3: No declines detected – table month vs sales.
      Follow-up experiment: test weekend promotion.
evaluators:
  - name: Output proposes follow-up experiment
    string:
      contains: 'Follow-up experiment'
