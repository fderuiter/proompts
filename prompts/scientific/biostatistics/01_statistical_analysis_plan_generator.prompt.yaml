# yamllint disable rule:line-length
---
name: Statistical Analysis Plan Generator
description: Generate a comprehensive statistical analysis plan for a clinical
version: "0.1.0"
metadata:
  domain: unknown
  complexity: medium
  tags: []
  requires_context: false
variables:
  - name: control
    description: ""
    required: true
    default: null
  - name: endpoint
    description: ""
    required: true
    default: null
  - name: factors
    description: ""
    required: true
    default: null
  - name: intervention
    description: ""
    required: true
    default: null
  - name: population
    description: ""
    required: true
    default: null
  - name: time_point
    description: ""
    required: true
    default: null

  trial.
model: gpt-4o
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |-
      You are an experienced biostatistics consultant. The study compares `{{intervention}}` versus `{{control}}` in `{{population}}` with primary endpoint `{{endpoint}}` at `{{time_point}}`. Randomisation is stratified by `{{factors}}`.

      Think step-by-step internally, but present only the final SAP.
  - role: user
    content: |-
      1. Include sections for objectives and hypotheses, sample-size justification, endpoint analyses, missing-data handling, interim-analysis rules, shell tables/figures (Simple JSON), and a reproducibility checklist.
      2. Keep total length ≤ 1 500 words.
      3. Begin each subsection with a plain-English summary.
      4. List assumptions requiring sponsor confirmation.

      Inputs:
      - `{{intervention}}`
      - `{{control}}`
      - `{{population}}`
      - `{{endpoint}}`
      - `{{time_point}}`
      - `{{factors}}`

      Output format:
      Markdown document using H2 headings for each section.
testData:
  - vars:
      intervention: example_intervention
      control: example_control
      population: example_population
      endpoint: example_endpoint
      time_point: example_time_point
      factors: example_factors
    expected: |-
      Markdown document using H2 headings for each section.
evaluators:
  - name: Output starts with '##'
    string:
      startsWith: '##'
