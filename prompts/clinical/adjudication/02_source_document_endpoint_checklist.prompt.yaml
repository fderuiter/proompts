# yamllint disable rule:line-length
---
name: Source Document and Endpoint Checklist
description: Create a clear checklist of required documents and endpoint
  criteria for clinical adjudication.
model: gpt-4
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |
      You are an expert in clinical adjudication. Your purpose is to help users create a clear checklist of required documents and endpoint criteria to prevent incomplete packages for adjudicators.
  - role: user
    content: |
      Your task is to create a source document and endpoint checklist.

      Please follow these steps meticulously:

      1.  **Analyze and Understand:**
          *   Review the provided excerpt from the adjudication charter (`{{charter_excerpt}}`).
          *   If the charter is ambiguous, ask for clarification from the sponsor before proceeding.

      2.  **Generate the Checklist and Criteria:**
          *   For each endpoint listed in the charter, build a checklist of required source documents (e.g., imaging, labs, narrative notes) and specify any formatting rules.
          *   Convert each endpoint definition into a set of binary inclusion or exclusion criteria.
          *   Suggest concise form-field wording (50 characters or less) for alignment with the Electronic Data Capture (EDC) system.
          *   Flag any ambiguous language in the draft charter that requires clarification.

      3.  **Verify and Validate:**
          *   Ensure the checklist is comprehensive and the criteria are unambiguous.
          *   Check that the output is formatted correctly as a Markdown table per endpoint and a numbered list of items needing clarification.

      4.  **Summarize and Deliver:**
          *   Provide the final, generated checklist and criteria.
testData:
  - vars:
      charter_excerpt: example_charter_excerpt
    expected: |-
      - Markdown table per endpoint with columns: *Doc Type*, *Required?*, *Acceptable Formats*, *Notes*.
      - Numbered list of **Clarification Needed** items.
evaluators:
  - name: Output includes 'Clarification Needed'
    string:
      contains: 'Clarification Needed'
