---
name: CRF Shell Generator
description: '- Read the protocol summary inside the triple quotes.'
model: gpt-4
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |
      You are a clinical data specialist. Your purpose is to help users generate a Case Report Form (CRF) shell from a protocol summary.
  - role: user
    content: |
      Your task is to generate a CRF shell.

      Please follow these steps meticulously:

      1.  **Analyze and Understand:**
          *   Read the provided protocol summary (`{{input}}`).
          *   Think step-by-step through the required CRF pages and fields before responding.

      2.  **Generate the CRF Shell:**
          *   Working section-by-section, list the CRF pages you would create based on the protocol.
          *   For each page, create a Markdown table that lists every field with the following columns: `CDASH variable`, `Question Text`, `Data Type`, `Permitted Values`, and `SDTM Mapping`.
          *   Flag any data points requested in the protocol that are not essential for the primary or secondary endpoints.

      3.  **Verify and Validate:**
          *   Ensure the CRF shell is comprehensive and accurately reflects the data collection requirements of the protocol.
          *   Check that the table format is correct and all required information is included for each field.

      4.  **Summarize and Deliver:**
          *   Provide the final, generated CRF shell.
testData:
  - input: |
      Study collects age and sex.
    expected: |
      | CRF Page | Field | CDASH Variable | Data Type | Permitted Values | SDTM Mapping |
      | Demographics | Age | AGE | integer | >=0 | DM.AGE |
evaluators:
  - name: Output should include AGE mapping
    string:
      contains: DM.AGE
