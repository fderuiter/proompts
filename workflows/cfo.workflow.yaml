name: "CFO Workflow"
description: "A workflow for financial forecasting, competitive bid pricing, and regulatory risk assessment."

inputs:
  - name: "base_revenue"
    description: "Baseline quarterly revenue (USD)."
  - name: "base_costs"
    description: "Baseline quarterly costs (USD)."
  - name: "starting_cash"
    description: "Cash on hand at start (USD)."
  - name: "notes"
    description: "Assumptions or upcoming events."
  - name: "competitor_bids"
    description: "List of competitor prices (USD)."
  - name: "internal_cost"
    description: "Our estimated delivery cost (USD)."
  - name: "target_margin"
    description: "Desired profit margin percentage."
  - name: "volume_adjustments"
    description: "Optional volume or scope notes."
  - name: "study_portfolio"
    description: "List of active or planned studies."
  - name: "reg_updates"
    description: "Relevant regulatory changes."
  - name: "esg_baseline"
    description: "Current ESG performance metrics."
  - name: "risk_tolerance"
    description: "High-level risk appetite or thresholds."

steps:
  - step_id: "forecast"
    prompt_file: "prompts/business/cfo/01_scenario_cash_flow_forecast.prompt.yaml"
    map_inputs:
      base_revenue: "{{inputs.base_revenue}}"
      base_costs: "{{inputs.base_costs}}"
      starting_cash: "{{inputs.starting_cash}}"
      notes: "{{inputs.notes}}"

  - step_id: "pricing"
    prompt_file: "prompts/business/cfo/02_competitive_bid_pricing.prompt.yaml"
    map_inputs:
      competitor_bids: "{{inputs.competitor_bids}}"
      internal_cost: "{{inputs.internal_cost}}"
      target_margin: "{{inputs.target_margin}}"
      volume_adjustments: "{{inputs.volume_adjustments}}"

  - step_id: "risk_dashboard"
    prompt_file: "prompts/business/cfo/03_regulatory_risk_dashboard.prompt.yaml"
    map_inputs:
      study_portfolio: "{{inputs.study_portfolio}}"
      reg_updates: "{{inputs.reg_updates}}"
      esg_baseline: "{{inputs.esg_baseline}}"
      risk_tolerance: "{{inputs.risk_tolerance}}"
