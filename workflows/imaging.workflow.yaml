name: "Imaging Workflow"
description: "A workflow for various imaging-related tasks, including charter drafting, QC, central reading design, and regulatory packaging."

inputs:
  - name: "charter_draft_protocol_synopsis"
    description: "Protocol synopsis for the imaging charter draft."
  - name: "charter_draft_modalities"
    description: "Imaging modalities for the charter draft."
  - name: "charter_draft_endpoints"
    description: "Imaging endpoints for the charter draft."
  - name: "charter_draft_sites"
    description: "Participating sites for the charter draft."
  - name: "charter_draft_regulations"
    description: "Key regulations for the charter draft."
  - name: "upload_log_csv"
    description: "Daily upload log with QC results."
  - name: "central_reading_disease"
    description: "Disease for the central reading design."
  - name: "central_reading_timepoints"
    description: "Imaging schedule for the central reading design."
  - name: "central_reading_endpoints"
    description: "Target endpoints for the central reading design."
  - name: "central_reading_reader_pool_size"
    description: "Number of available readers for the central reading design."
  - name: "central_reading_budget"
    description: "Cost constraint per read for the central reading design."
  - name: "reg_charter_study_overview"
    description: "Study overview for the regulatory imaging charter."
  - name: "reg_charter_modalities"
    description: "Imaging modalities for the regulatory imaging charter."
  - name: "reg_charter_regions"
    description: "Participating regions for the regulatory imaging charter."
  - name: "reg_charter_endpoint_description"
    description: "Primary endpoint definition for the regulatory imaging charter."
  - name: "qc_workflow_study_description"
    description: "Short trial overview for the QC workflow blueprint."
  - name: "qc_workflow_modalities"
    description: "Modality details for the QC workflow blueprint."
  - name: "data_package_study_summary"
    description: "Key trial details for the regulatory imaging data package."
  - name: "data_package_metrics_data"
    description: "Image-quality metrics for the regulatory imaging data package."
  - name: "data_package_reader_agreement"
    description: "Reader agreement statistics for the regulatory imaging data package."

steps:
  - step_id: "imaging_charter_draft"
    prompt_file: "imaging_prompts/01_imaging_charter_draft.prompt.yaml"
    map_inputs:
      "<<<protocol_synopsis>>>": "{{inputs.charter_draft_protocol_synopsis}}"
      "<<<modalities>>>": "{{inputs.charter_draft_modalities}}"
      "<<<endpoints>>>": "{{inputs.charter_draft_endpoints}}"
      "<<<sites>>>": "{{inputs.charter_draft_sites}}"
      "<<<regulations>>>": "{{inputs.charter_draft_regulations}}"
  - step_id: "site_upload_qc"
    prompt_file: "imaging_prompts/02_site_upload_qc.prompt.yaml"
    map_inputs:
      "<<<upload_log.csv>>>": "{{inputs.upload_log_csv}}"
  - step_id: "central_reading_design"
    prompt_file: "imaging_prompts/03_central_reading_design.prompt.yaml"
    map_inputs:
      "<<<disease>>>": "{{inputs.central_reading_disease}}"
      "<<<timepoints>>>": "{{inputs.central_reading_timepoints}}"
      "<<<endpoints>>>": "{{inputs.central_reading_endpoints}}"
      "<<<reader_pool_size>>>": "{{inputs.central_reading_reader_pool_size}}"
      "<<<budget>>>": "{{inputs.central_reading_budget}}"
  - step_id: "regulatory_imaging_charter"
    prompt_file: "imaging_prompts/04_regulatory_imaging_charter_generator.prompt.yaml"
    map_inputs:
      "<<<study_overview>>>": "{{inputs.reg_charter_study_overview}}"
      "<<<modalities>>>": "{{inputs.reg_charter_modalities}}"
      "<<<regions>>>": "{{inputs.reg_charter_regions}}"
      "<<<endpoint_description>>>": "{{inputs.reg_charter_endpoint_description}}"
  - step_id: "image_acquisition_qc_workflow"
    prompt_file: "imaging_prompts/05_image_acquisition_qc_workflow_blueprint.prompt.yaml"
    map_inputs:
      "<<<study_description>>>": "{{inputs.qc_workflow_study_description}}"
      "<<<modalities>>>": "{{inputs.qc_workflow_modalities}}"
  - step_id: "regulatory_imaging_data_package"
    prompt_file: "imaging_prompts/06_regulatory_imaging_data_package.prompt.yaml"
    map_inputs:
      "<<<study_summary>>>": "{{inputs.data_package_study_summary}}"
      "<<<metrics_data>>>": "{{inputs.data_package_metrics_data}}"
      "<<<reader_agreement>>>": "{{inputs.data_package_reader_agreement}}"
