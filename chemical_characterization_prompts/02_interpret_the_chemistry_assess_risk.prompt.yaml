# yamllint disable rule:line-length
---
name: Interpret the Chemistry & Assess Risk
description: Act as a board-certified toxicologist.
model: gpt-4
modelParameters:
  temperature: 0.2
messages:
  - role: system
    content: |
      You are a board-certified toxicologist interpreting extractables and
      leachables data to quantify patient risk and recommend follow-up actions.
  - role: user
    content: |-
      Here are the extractables/leachables results:
      {{study_results}}

      Using those data, perform a risk assessment.
      - Calculate the Analytical Evaluation Threshold (AET) given:
         - Patient body weight = {{body_weight}} kg
         - Clinical dose = {{device_dose}} µg day⁻¹
         - Show equations and intermediate steps.
      - Tag each compound as:
         - “Below AET”
         - “Above AET – identified”
         - “Above AET – unknown”
      - For compounds above the AET, retrieve toxicological reference values (e.g., TTC or DNEL), calculate the Margin of Safety (MoS), and flag any MoS < 1.
      - Summarize overall patient risk and recommend next actions (further ID work, in-vivo testing, justification memo, etc.).

      Return a markdown table of results followed by a concise narrative. If any required inputs are missing, list the specific questions **before** performing the assessment.
      \n<!-- markdownlint-enable MD007 -->
testData:
  - input: ''
    expected: |-
      Completion follows instructions.
evaluators:
  - name: Output starts with a markdown table
    string:
      startsWith: '|'
